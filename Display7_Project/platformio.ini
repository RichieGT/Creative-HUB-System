; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env:esp32-s3-devkitc-1]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200
board_upload.flash_size = 16MB
board_build.arduino.memory_type = qio_opi
board_build.partitions = default_16MB.csv

build_flags = 
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    -DLV_CONF_INCLUDE_SIMPLE
    -I src
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DARDUINO_USB_MODE=1
    ; Correct Pin Definitions for Waveshare ESP32-S3-Touch-LCD-7
    -D TFT_WIDTH=800
    -D TFT_HEIGHT=480
    -D TFT_DE=5
    -D TFT_VSYNC=3
    -D TFT_HSYNC=46
    -D TFT_PCLK=7
    -D TFT_B0=14
    -D TFT_B1=38
    -D TFT_B2=18
    -D TFT_B3=17
    -D TFT_B4=10
    -D TFT_G0=39
    -D TFT_G1=0
    -D TFT_G2=45
    -D TFT_G3=48
    -D TFT_G4=47
    -D TFT_G5=21
    -D TFT_R0=1
    -D TFT_R1=2
    -D TFT_R2=42
    -D TFT_R3=41
    -D TFT_R4=40
    -D TFT_BCKL=6
    -D TFT_HSYNC_POLARITY=0
    -D TFT_HSYNC_FRONT_PORCH=20
    -D TFT_HSYNC_PULSE_WIDTH=10
    -D TFT_HSYNC_BACK_PORCH=10
    -D TFT_VSYNC_POLARITY=0
    -D TFT_VSYNC_FRONT_PORCH=10
    -D TFT_VSYNC_PULSE_WIDTH=10
    -D TFT_VSYNC_BACK_PORCH=10
    -D TFT_PCLK_ACTIVE_NEG=0
    -D TFT_PREFER_SPEED=14000000
    -D TFT_AUTO_FLUSH=1
    
    ; Touch Pins (GT911)
    -D TOUCH_SDA=8
    -D TOUCH_SCL=9
    -D TOUCH_INT=-1 ; Often not connected or INT pin
    -D TOUCH_RST=-1 ; Often handled automatically or via IO expander
    -D TOUCH_WIDTH=800
    -D TOUCH_HEIGHT=480

lib_deps = 
    lvgl/lvgl @ ^9.1.0
    moononournation/GFX Library for Arduino @ 1.4.7
    tamctec/TAMC_GT911 @ ^1.0.2
    bblanchon/ArduinoJson @ 7.3.0
    links2004/WebSockets @ ^2.4.1
